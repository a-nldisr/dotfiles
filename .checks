#!/bin/bash

# This checks the platform and then registers the platform in a variable

register_os(){
local unamestr
# Retrieve platform
unamestr=$(uname)
# Retrieve processor type
unameproc=$(uname -p)

if [[ -z "$unamestr" ]]; then
    platform='unset'
    echo "${platform} platform"
elif [[ "$unamestr" == 'Linux' ]]; then
   platform='linux'
elif [[ "$unamestr" == 'FreeBSD' ]]; then
   platform='freebsd'
elif [[ "$unamestr" == 'Darwin' ]]; then
   if [[ "$unameproc" == 'i386' ]]; then
      platform='darwin'
      PROCESSOR='i386'
      export PROCESSOR
   elif [[ "$unameproc" == 'arm' ]]; then
      platform='darwin'
      PROCESSOR='arm'
      export PROCESSOR
   fi
fi
}

register_os